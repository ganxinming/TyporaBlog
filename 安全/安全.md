注入攻击:例如sql注入，Xpath注入，

问题:

1.敏感信息泄露

2.数据库被破坏

3.权限提升

**sql盲注:**

向数据库中进行真或假查询，通过应用程序返回来判断查询结果。例如:运用不同的sql语句，通过返回结果来判断是否有效查询。比如:他测出了表名，和表某些字段，就可以做很多事了。

比如:一个有效查询时间是2秒，他通过判断0.5秒的sql语句是无效的。这些隐藏信息来判断sql语句。

**SQL注入的原因:**

就是sql语句的执行需要传入参数后，一起形成sql语句进行执行。

如果进行预编译，则一开始就解析成一条sql语句，而后来的只作为参数注入，而不是sql字段。

(说白了，就是sql语句和接入的参数被进行了拼接)

会话：(确保多个连接是同一个用户操作)

是为了确保网络http请求和响应事务。因为http是无状态，无连接的，对事务没有记忆能力，所以才需要会话。

1.通过一个会话ID来保证是同一个用户。

2.ID的值是一个hash值，不能暴露任何有价值的信息。

会话攻击:

会话劫持:劫持了用户的ID值，并用他进行模拟用户。

会话固定:将用户的id值设置成预定义的值，这样利用已知值进行模拟



XSS:攻击者在网页中插入恶意代码，使用户加载并执行攻击者恶意制造的网页程序。通常是用js插入。

种类:

反射型XSS(非持久型)：

一般来说这种类型的XSS，需要攻击者提前构造一个恶意链接，来诱使客户点击，比如这样的一段链接：`www.abc.com/?params=<script>alert(/xss/)</script>`。 

存储式XSS：

这种类型的XSS，危害比前一种大得多。比如一个攻击者在论坛的楼层中包含了一段JavaScript代码，并且服务器没有正确进行过滤输出，那就会造成浏览这个页面的用户执行这段JavaScript代码。 

DOM型XSS

这种类型则是利用非法输入来闭合对应的html标签。 
比如，有这样的一个a标签：`<a href='$var'></a>` 
乍看问题不大，可是当$var的内容变为 ’ οnclick=’alert(/xss/) //，这段代码就会被执行。

预防：微软的反XSS库



盐的作用：

主要是用来解决彩虹表的问题：

彩虹表是一张非常大的hash表，包含很多值的hash值(几百个G吧)

通过将已知的hash值，查询彩虹表得到原来的值。

盐+值进行hash运算，这样别人破解的几率就变小了。每个人的盐都是随机的。

盐不需要保密，因为每个用户使用独特的盐值减慢了一个攻击者的行为。可以使用伪随机数发生产生。



CSRF: 通过伪装成受信任用户的请求来利用受信任的网站。例如:将用户cookie的值去访问其他受信任的站点，可以直接访问。如果是管理员则会造成整个WEB程序的问题。



### springSecurity的加密器BCryptPassword：

为什么同一个密码每次加密后的结果都不一样，这是因为每次都加了盐，每次的盐不同，则每次得到的结果都不同。

生成的密码中，$是分割符，无意义；2a是bcrypt加密版本号；10是cost的值（默认值）；而后的前22位是salt值；再然后的字符串就是密码的密文了。

所以每次比较的时候，会先取出盐值，将盐值和密码进行hash然后就可以和数据库中进行对比。

优点：

1.如果两个人或多个人的密码相同，加密后保存会得到相同的结果。破一个就可以破一片的密码。如果名为A的用户可以查看数据库，那么他可以观察到自己的密码和别人的密码加密后的结果都是一样，那么，别人用的和自己就是同一个密码，这样，就可以利用别人的身份登录了。其实只要稍微混淆一下就能防范住了，这在加密术语中称为“加盐”。
2.有效抵御彩虹表攻击

（总结：1.之所以能每次密码不同是因为每次盐不同。2.之所以能识别，是因为盐值存在密码中，22位之后的字符，都是盐值和密码hash后的值。这个值，相同密码hash后都不同。）